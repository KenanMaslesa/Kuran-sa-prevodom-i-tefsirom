<ion-header class="{{quranService.showHeaderAndTabs?'show':'hide'}}" (click)="quranService.showHeaderAndTabs=!quranService.showHeaderAndTabs">
  <ion-toolbar color="primary">
    <ion-title>
      <ng-container *ngIf="suraList">
        {{currentSuraTitle}}
      </ng-container>
    </ion-title>
    <ion-buttons slot="start">
      <ion-back-button (click)="showSearchHeader=true;" defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-icon slot="end" name="search" *ngIf="quranService.showHeaderAndTabs" (click)="quranService.showHeaderAndTabs=!quranService.showHeaderAndTabs;showSearchHeader=!showSearchHeader"></ion-icon>

    <div class="play-btn-wrapper" *ngIf="audio && quranService.showHeaderAndTabs" slot="end">
      <ng-container>
        <ion-icon name="play" *ngIf="audio.paused" (click)="resumeAudio(); quranService.showHeaderAndTabs=!quranService.showHeaderAndTabs"></ion-icon>
        <ion-icon name="pause" *ngIf="!audio.paused" (click)="pauseAudio(); quranService.showHeaderAndTabs=!quranService.showHeaderAndTabs"></ion-icon>
      </ng-container>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="caching" *ngIf="quranService.currentPageForCaching<604">
    <ion-label>Preuzimanje stranica</ion-label>
    <ion-badge slot="end">{{quranService.currentPageForCaching}}/604</ion-badge>
  </div>

  <app-loader *ngIf="quranService.showLoader && quranService.currentPageForCaching>=604"></app-loader>
  <header *ngIf="showSearchHeader">
    <div class="form-group dropdown-wrapper">
      <ion-item>
        <ion-label>Ucac</ion-label>
        <ion-select #select [(ngModel)]="quranService.qari" (ngModelChange)="quranService.changeQari(select.value)" class="ion-select form-control" name="qari" #qari (ionChange)="onQariChanged(qari.value)">
          <ion-select-option *ngFor="let item of quranService.qariList" value="{{item.identifier}}">{{item.englishName}}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Upisite broj stranice</ion-label>
        <ion-input #number (ionChange)="onSuraChanged(number.value)"></ion-input>
      </ion-item>
    </div>
  </header>

  <div class="main {{quranService.showHeaderAndTabs?'':'without-tabs'}}">
    <ion-slides #slides pager="false" [options]="slideOpts"
      (ionSlideNextEnd)="onSuraChanged(+quranService.currentPage + 1)"
      (ionSlidePrevEnd)="onSuraChanged(+quranService.currentPage - 1)"
      (ionSlideReachStart)="slideTo(1)"
      (ionSlideReachEnd)="slideTo(1)"
      >
      <ng-container *ngIf="quranService.words">
        <ion-slide dir="rtl" lang="ar">
          <ng-container>
          <ng-container *ngFor="let item of quranService.words.result; let i = index">
            <section class="suraTitle" *ngIf="!item.word && item.detail.ayas">
              <img src="https://salamquran.com/static/images/quran/sura-header.svg" alt="Quran sura title">
              <h3>{{setSuraTitle(item.detail.name + ' - '+ item.detail.tname)}}</h3>
            </section>

            <section class="bismillah"
              *ngIf="item.detail.line_type === 'besmellah' && quranService.words.result[1].detail.page !== '187'">
              <div id="{{item.detail.page}}">﷽</div>
              <h4 class="ayeSimple">بسم الله الرحمن الرحیم</h4>
            </section>

            <div class="ayeLine" *ngIf="item.word">
              <ng-container *ngFor="let word of item.word">

                <i *ngIf="word.char_type !== 'end'" class="{{word.class_name}} index-{{word.index}} aya{{word.verse_key.replace(':', '-')}}"
                  id="w{{word.audio_key}}" [innerHtml]="word.code" (click)="playWord(word.audio)"></i>
                <!--ngbPopover="{{word.translation}}" triggers="mouseenter:mouseleave"-->

                <i *ngIf="word.char_type === 'end'" class="{{word.class_name}} aya{{word.verse_key.replace(':', '-')}}"
                  id="w{{word.audio_key}}" [innerHtml]="word.code"
                  (click)="playAyat(word, word.aya, word.verse_key.replace(':', '-'))"
                  (mouseover)="manageClassesOfAyats(word.verse_key, 'mouseover')"
                  (mouseleave)="manageClassesOfAyats(word.verse_key, 'mouseleave')"></i>

              </ng-container>
            </div>
          </ng-container>
        </ng-container>
          <ion-text>
            {{quranService.currentPage}}
          </ion-text>
        </ion-slide>
      </ng-container>
    </ion-slides>
  </div>
</ion-content>
